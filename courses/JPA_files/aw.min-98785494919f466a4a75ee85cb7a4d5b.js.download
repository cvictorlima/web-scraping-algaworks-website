var AWProductSales=AWProductSales||{};AWProductSales.init=function(){var o=$(".js-video-iframe"),e=$(".js-video-container"),t=$(".js-show-coupon-input"),n=$(".js-remove-coupon"),i=$(".js-coupon-input-block");function c(){var o=function(o){var t=document.location.href,e=t.split("?")[0],n=[],i=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==i){for(var c=(n=i.split("&")).length-1;0<=c;--c)n[c].split("=")[0]===o&&n.splice(c,1);e=e+"?"+n.join("&")}return e}("cupom"),t=o.split("?");""!=t[1]&&null!=t[1]||(o=t[0]),history.pushState(null,"",o)}$(t).click(function(){$(this).hide(),$(i).removeClass("sr-only"),$("#couponCode").focus()}),$(n).click(function(){$("#couponCode").val(""),c(),a()}),o.each(function(){$(this).attr("data-aspectRatio",this.height/this.width).removeAttr("height").removeAttr("width")}),$(window).resize(function(){var t=e.width()-20;o.each(function(){var o=$(this);o.width(t).height(t*o.attr("data-aspectRatio"))})}).resize(),$(".js-check-coupon").click(function(){c(),a()});var a=function(){var t=$("[name='_csrf']").val(),o=[location.protocol,"//",location.host,location.pathname,"/cupom"].join("");$.ajax({contentType:"application/json",data:JSON.stringify({couponCode:$("#couponCode").val(),consumerName:$("#fullName").val(),consumerEmail:$("#emailAddress").val(),consumerPhone:$("#phoneNumber").val()}),dataType:"json",converters:{"text json":!0},url:o,type:"POST",beforeSend:function(o){NProgress.start(),o.setRequestHeader("X-CSRF-TOKEN",t)},success:function(o){NProgress.done(!0),NProgress.remove(),$("body").html(o)}})}}();var AWUserDropdown=AWUserDropdown||{};AWUserDropdown.init=void $(".js-user-dropdown-toggle").click(function(){var o=$(".js-user-dropdown-box");o.is(":visible")?o.hide():o.show()});var AWValidator=AWValidator||{};AWValidator.init=function(){function t(e){var a=$(e).data("required-message")||"Campo não pode ser vazio";e.setCustomValidity(""),s([e],a)}var s=function(e,t){$(e).each(function(e,a){r(a,t)})},r=function(e,a){$(e).addClass("c-input--error"),$(e).addClass("js-input-error");var t=$("label[for='"+$(e).attr("id")+"']");t.length&&t.addClass("c-label--error");var r,n=$(e).next("span.c-input-error");n.length?(n.text(a),n.show()):$(e).after("<span class='c-input-error c-input-error--visible'>"+a+"</span>"),r="form input[type='submit'].c-button",$(r).prop("disabled",!1),$(r).removeClass("c-button--disabled")},n=function(e,t){$(e).find("input[data-required-fullname]").each(function(e,a){d(t,$(a))})},i=function(e,t){$(e).find("input[data-required-equals]").each(function(e,a){u(t,$(a))})},l=function(e,l){$(e).find("input[data-max-length]").each(function(e,a){var t,r,n,i;t=l,r=a,(i=$(r).data("max-length"))&&$(r).val().length>i&&(t.preventDefault(),n=$(r).data("max-length-message")||"O campo deve ter no máximo "+i+" caracteres",s([r],n))}),$(e).find("input[data-min-length]").each(function(e,a){var t,r,n,i;t=l,r=a,(i=$(r).data("min-length"))&&$(r).val().length<i&&(t.preventDefault(),n=$(r).data("min-length-message")||"O campo deve ter no mínimo "+i+" caracteres",s([r],n))})},o=function(e,o){$(e).find("[data-min-letter-length]").each(function(e,a){var t,r,n,i,l;t=o,r=a,i=$(r).data("min-letter-length"),l=$(r).val().replace(/[^a-zA-Z]/g,"").length,i&&l<i?(t.preventDefault(),n=$(r).data("min-letter-length-message")||"O campo deve ter no mínimo "+i+" letras",s([r],n)):c(r)})},u=function(e,a){var t=$("[name='"+$(a).data("required-equals")+"']"),r=$(a).data("required-equals-message")||"Os valores dos campos devem ser iguais";a.val()!==t.val()&&(e.preventDefault(),$(".js-valid-equals-error").length?$(".js-valid-equals-error").show():$(a).closest("form").find(".message-group").prepend("<div class='js-valid-equals-error c-alert  c-alert--error'>"+r+"</div>"),s([t],r))},d=function(e,a){var t=$(a).data("required-fullname-message")||"Informe o nome completo";(!a.val().trim().length||a.val().trim().split(" ").length<=1)&&(e.preventDefault(),s([a],t))},c=function(e){var a=$("label[for='"+$(e).attr("id")+"']");a.length&&a.removeClass("c-label--error"),$(e).removeClass("c-input--error"),$(e).next("span.c-input-error").hide(),$(".js-valid-equals-error").show()};$("[has-error='true']").each(function(e,a){t(a)}),$("input[required], textarea[required], select[required]").on("invalid",function(e){$(e.target).is(":invalid")&&(t(this),e.preventDefault())}),$("input[required], textarea[required], select[required]").on("focusout keyup",function(e){var a=e.target,t=$(a).next("span.c-input-error:visible").text();!a||$(a).hasClass("js-input-error")?null!=a&&null!=t&&t.length&&(c(this),r(a,t)):c(this)}),$("form").on("submit",function(e){var a,t,r;a="form input[type='submit'].c-button",$(a).prop("disabled",!0),$(a).addClass("c-button--disabled"),$(".c-alert").each(function(e,a){$(a).remove()}),i(t=this,r=e),l(t,r),n(t,r),o(t,r)}),$(".js-auto-hidden").delay(1e4).slideUp(300)}();